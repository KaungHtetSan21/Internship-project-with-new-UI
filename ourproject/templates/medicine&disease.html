<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine-Disease Management | Pharmacy Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1e40af',
                        secondary: '#3b82f6',
                        lightblue: '#dbeafe',
                        darkblue: '#1e3a8a'
                    }
                }
            }
        }
    </script>
    <style>
        @media (max-width: 640px) {
            .responsive-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            .mobile-card {
                min-width: 300px;
            }
        }
        @media (max-width: 768px) {
            .grid-cols-1-md {
                grid-template-columns: repeat(1, minmax(0, 1fr));
            }
        }
        .card {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .status-badge {
            transition: all 0.2s ease;
        }
        .search-input:focus + .search-icon {
            color: #3b82f6;
        }
        [x-cloak] { display: none !important; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen" x-data="medicineDiseaseApp()" x-cloak>
    <!-- Navigation -->
    <nav class="bg-primary text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <i class="fas fa-clinic-medical text-2xl"></i>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <a href="pharmastic dashboard.html" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-secondary">Dashboard</a>
                            <a href="#" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-secondary">POS</a>
                            <a href="#" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-secondary">Inventory</a>
                            <a href="#" class="px-3 py-2 rounded-md text-sm font-medium hover:bg-secondary">Patients</a>
                            <a href="#" class="px-3 py-2 rounded-md text-sm font-medium bg-white text-primary">Medicine-Disease</a>
                        </div>
                    </div>
                </div>
                <div class="flex items-center">
                    <button class="p-1 rounded-full text-white focus:outline-none">
                        <i class="fas fa-bell"></i>
                    </button>
                    <div class="ml-3 relative">
                        <div class="flex items-center">
                            <div class="text-sm mr-3 hidden md:block">Dr. Sarah Miller</div>
                            <div class="relative group">
                                <img class="h-8 w-8 rounded-full object-cover cursor-pointer" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath fill='%23ffffff' d='M12 12q-1.65 0-2.825-1.175T8 8q0-1.65 1.175-2.825T12 4q1.65 0 2.825 1.175T16 8q0 1.65-1.175 2.825T12 12Zm-8 8v-2.8q0-.85.438-1.563T5.6 14.55q1.55-.775 3.15-1.163T12 13q1.65 0 3.25.388t3.15 1.162q.725.375 1.163 1.088T20 17.2V20H4Z'/%3E%3C/svg%3E" alt="User">
                                <!-- Dropdown menu -->
                                <div class="hidden group-hover:block absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10">
                                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                                    <a href="#" id="logout-button" class="block px-4 py-2 text-sm text-red-600 hover:bg-gray-100">Logout</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow">
        <!-- Header -->
        <div class="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">Medicine & Disease Management</h1>
                <p class="mt-2 text-gray-600">Manage relationships between medicines and diseases/conditions</p>
            </div>
            <div class="mt-4 md:mt-0 flex space-x-3">
                <div class="relative">
                    <input type="text" x-model="searchQuery" placeholder="Search..." class="search-input pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary w-full md:w-64">
                    <i class="fas fa-search search-icon absolute left-3 top-3 text-gray-400"></i>
                </div>
                <button @click="openAddModal()" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-darkblue transition flex items-center">
                    <i class="fas fa-plus mr-2"></i> Add New
                </button>
            </div>
        </div>

        <!-- Tabs -->
        <div class="mb-6 border-b border-gray-200">
            <div class="flex space-x-8">
                <button @click="activeTab = 'medicines'" :class="{'border-b-2 border-primary text-primary': activeTab === 'medicines', 'text-gray-500 hover:text-gray-700': activeTab !== 'medicines'}" class="py-4 px-1 font-medium text-sm">
                    Medicines
                </button>
                <button @click="activeTab = 'diseases'" :class="{'border-b-2 border-primary text-primary': activeTab === 'diseases', 'text-gray-500 hover:text-gray-700': activeTab !== 'diseases'}" class="py-4 px-1 font-medium text-sm">
                    Diseases/Conditions
                </button>
                <button @click="activeTab = 'relationships'" :class="{'border-b-2 border-primary text-primary': activeTab === 'relationships', 'text-gray-500 hover:text-gray-700': activeTab !== 'relationships'}" class="py-4 px-1 font-medium text-sm">
                    Relationships
                </button>
            </div>
        </div>

        <!-- Medicines Tab -->
        <div x-show="activeTab === 'medicines'" class="card bg-white rounded-lg">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-medium text-gray-900">Medicines List</h2>
                    <div class="text-sm text-gray-500" x-text="`${filteredMedicines.length} items`"></div>
                </div>
                <div class="responsive-table">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Medicine Name</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Generic Name</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Related Conditions</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="medicine in filteredMedicines" :key="medicine.id">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-blue-50 rounded-md">
                                                <i class="fas fa-pills text-blue-500"></i>
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" x-text="medicine.brandName"></div>
                                                <div class="text-sm text-gray-500" x-text="medicine.strength"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="medicine.genericName"></td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full" 
                                              :class="{
                                                  'bg-green-100 text-green-800': medicine.type === 'Prescription',
                                                  'bg-blue-100 text-blue-800': medicine.type === 'OTC',
                                                  'bg-purple-100 text-purple-800': medicine.type === 'Supplement'
                                              }" 
                                              x-text="medicine.type"></span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex flex-wrap gap-1">
                                            <template x-for="disease in medicine.relatedDiseases" :key="disease">
                                                <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800" x-text="disease"></span>
                                            </template>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <button @click="editMedicine(medicine)" class="text-primary hover:text-darkblue mr-3">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button @click="confirmDelete(medicine.id, medicine.brandName, 'medicine')" class="text-red-600 hover:text-red-900">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </template>
                            <tr x-show="filteredMedicines.length === 0">
                                <td colspan="5" class="px-6 py-4 text-center text-sm text-gray-500">No medicines found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Diseases Tab -->
        <div x-show="activeTab === 'diseases'" class="card bg-white rounded-lg">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-medium text-gray-900">Diseases/Conditions List</h2>
                    <div class="text-sm text-gray-500" x-text="`${filteredDiseases.length} items`"></div>
                </div>
                <div class="responsive-table">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Disease/Condition</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Related Medicines</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="disease in filteredDiseases" :key="disease.id">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-red-50 rounded-md">
                                                <i class="fas fa-virus text-red-500"></i>
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" x-text="disease.name"></div>
                                                <div class="text-sm text-gray-500" x-text="disease.code"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="disease.category"></td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex flex-wrap gap-1">
                                            <template x-for="medicine in disease.relatedMedicines" :key="medicine">
                                                <span class="px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800" x-text="medicine"></span>
                                            </template>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <button @click="editDisease(disease)" class="text-primary hover:text-darkblue mr-3">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button @click="confirmDelete(disease.id, disease.name, 'disease')" class="text-red-600 hover:text-red-900">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </template>
                            <tr x-show="filteredDiseases.length === 0">
                                <td colspan="4" class="px-6 py-4 text-center text-sm text-gray-500">No diseases/conditions found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Relationships Tab -->
        <div x-show="activeTab === 'relationships'" class="card bg-white rounded-lg">
            <div class="p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-medium text-gray-900">Medicine-Disease Relationships</h2>
                    <button @click="openRelationshipModal()" class="px-4 py-2 bg-primary text-white rounded-md hover:bg-darkblue transition flex items-center text-sm">
                        <i class="fas fa-link mr-2"></i> Add Relationship
                    </button>
                </div>
                <div class="responsive-table">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Medicine</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Disease/Condition</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Treatment Type</th>
                                <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                            <template x-for="rel in filteredRelationships" :key="rel.id">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-blue-50 rounded-md">
                                                <i class="fas fa-pills text-blue-500"></i>
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" x-text="rel.medicineName"></div>
                                                <div class="text-sm text-gray-500" x-text="rel.medicineGeneric"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10 flex items-center justify-center bg-red-50 rounded-md">
                                                <i class="fas fa-virus text-red-500"></i>
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900" x-text="rel.diseaseName"></div>
                                                <div class="text-sm text-gray-500" x-text="rel.diseaseCode"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full" 
                                              :class="{
                                                  'bg-green-100 text-green-800': rel.type === 'Primary',
                                                  'bg-yellow-100 text-yellow-800': rel.type === 'Secondary',
                                                  'bg-purple-100 text-purple-800': rel.type === 'Preventive'
                                              }" 
                                              x-text="rel.type"></span>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                        <button @click="editRelationship(rel)" class="text-primary hover:text-darkblue mr-3">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button @click="confirmDelete(rel.id, `${rel.medicineName} for ${rel.diseaseName}`, 'relationship')" class="text-red-600 hover:text-red-900">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </template>
                            <tr x-show="filteredRelationships.length === 0">
                                <td colspan="4" class="px-6 py-4 text-center text-sm text-gray-500">No relationships found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-medium mb-4">Pharmacy Pro</h3>
                    <p class="text-gray-400">Comprehensive pharmacy management solution for modern healthcare providers.</p>
                </div>
                <div>
                    <h3 class="text-lg font-medium mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="pharmastic dashboard.html" class="text-gray-400 hover:text-white">Dashboard</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">POS</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Inventory</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Patients</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Medicine-Disease</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-medium mb-4">Contact Us</h3>
                    <ul class="space-y-2">
                        <li class="flex items-center text-gray-400"><i class="fas fa-map-marker-alt mr-2"></i> 123 Medical St, Health City</li>
                        <li class="flex items-center text-gray-400"><i class="fas fa-phone-alt mr-2"></i> (555) 123-4567</li>
                        <li class="flex items-center text-gray-400"><i class="fas fa-envelope mr-2"></i> support@pharmacypro.com</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-400 text-sm">Â© 2023 Pharmacy Pro. All rights reserved.</p>
                <div class="flex space-x-6 mt-4 md:mt-0">
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Mobile Bottom Navigation -->
    <div class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200">
        <div class="flex justify-around">
            <a href="pharmastic dashboard.html" class="p-4 text-gray-500">
                <i class="fas fa-home block text-center text-xl"></i>
                <span class="text-xs block text-center mt-1">Home</span>
            </a>
            <a href="#" class="p-4 text-gray-500">
                <i class="fas fa-cash-register block text-center text-xl"></i>
                <span class="text-xs block text-center mt-1">POS</span>
            </a>
            <a href="#" class="p-4 text-gray-500">
                <i class="fas fa-boxes block text-center text-xl"></i>
                <span class="text-xs block text-center mt-1">Stock</span>
            </a>
            <a href="#" class="p-4 text-primary">
                <i class="fas fa-pills block text-center text-xl"></i>
                <span class="text-xs block text-center mt-1">Meds</span>
            </a>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div x-show="showModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-medium text-gray-900" x-text="modalTitle"></h3>
                <button @click="closeModal()" class="text-gray-400 hover:text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Medicine Form -->
            <form x-show="activeTab === 'medicines'" @submit.prevent="saveMedicine()">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="brand-name" class="block text-sm font-medium text-gray-700 mb-1">Brand Name</label>
                        <input type="text" id="brand-name" x-model="currentMedicine.brandName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                    </div>
                    <div>
                        <label for="generic-name" class="block text-sm font-medium text-gray-700 mb-1">Generic Name</label>
                        <input type="text" id="generic-name" x-model="currentMedicine.genericName" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                    </div>
                    <div>
                        <label for="strength" class="block text-sm font-medium text-gray-700 mb-1">Strength</label>
                        <input type="text" id="strength" x-model="currentMedicine.strength" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                    </div>
                    <div>
                        <label for="medicine-type" class="block text-sm font-medium text-gray-700 mb-1">Type</label>
                        <select id="medicine-type" x-model="currentMedicine.type" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                            <option value="Prescription">Prescription</option>
                            <option value="OTC">Over-the-counter</option>
                            <option value="Supplement">Supplement</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <label for="medicine-diseases" class="block text-sm font-medium text-gray-700 mb-1">Related Diseases/Conditions</label>
                        <select id="medicine-diseases" x-model="currentMedicine.relatedDiseases" multiple class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary h-auto">
                            <template x-for="disease in diseases" :key="disease.id">
                                <option :value="disease.name" x-text="disease.name"></option>
                            </template>
                        </select>
                        <p class="mt-1 text-sm text-gray-500">Hold Ctrl/Cmd to select multiple</p>
                    </div>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" @click="closeModal()" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button>
                    <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-primary hover:bg-darkblue">Save</button>
                </div>
            </form>
            
            <!-- Disease Form -->
            <form x-show="activeTab === 'diseases'" @submit.prevent="saveDisease()">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="disease-name" class="block text-sm font-medium text-gray-700 mb-1">Disease/Condition Name</label>
                        <input type="text" id="disease-name" x-model="currentDisease.name" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                    </div>
                    <div>
                        <label for="disease-code" class="block text-sm font-medium text-gray-700 mb-1">Code (ICD-10)</label>
                        <input type="text" id="disease-code" x-model="currentDisease.code" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
                    </div>
                    <div>
                        <label for="disease-category" class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                        <input type="text" id="disease-category" x-model="currentDisease.category" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
                    </div>
                    <div class="md:col-span-2">
                        <label for="disease-medicines" class="block text-sm font-medium text-gray-700 mb-1">Related Medicines</label>
                        <select id="disease-medicines" x-model="currentDisease.relatedMedicines" multiple class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary h-auto">
                            <template x-for="medicine in medicines" :key="medicine.id">
                                <option :value="medicine.brandName" x-text="medicine.brandName"></option>
                            </template>
                        </select>
                        <p class="mt-1 text-sm text-gray-500">Hold Ctrl/Cmd to select multiple</p>
                    </div>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" @click="closeModal()" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button>
                    <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-primary hover:bg-darkblue">Save</button>
                </div>
            </form>
            
            <!-- Relationship Form -->
            <form x-show="activeTab === 'relationships'" @submit.prevent="saveRelationship()">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="rel-medicine" class="block text-sm font-medium text-gray-700 mb-1">Medicine</label>
                        <select id="rel-medicine" x-model="currentRelationship.medicineId" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                            <option value="">Select Medicine</option>
                            <template x-for="medicine in medicines" :key="medicine.id">
                                <option :value="medicine.id" x-text="`${medicine.brandName} (${medicine.genericName})`"></option>
                            </template>
                        </select>
                    </div>
                    <div>
                        <label for="rel-disease" class="block text-sm font-medium text-gray-700 mb-1">Disease/Condition</label>
                        <select id="rel-disease" x-model="currentRelationship.diseaseId" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                            <option value="">Select Disease/Condition</option>
                            <template x-for="disease in diseases" :key="disease.id">
                                <option :value="disease.id" x-text="disease.name"></option>
                            </template>
                        </select>
                    </div>
                    <div>
                        <label for="rel-type" class="block text-sm font-medium text-gray-700 mb-1">Treatment Type</label>
                        <select id="rel-type" x-model="currentRelationship.type" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary" required>
                            <option value="Primary">Primary Treatment</option>
                            <option value="Secondary">Secondary Treatment</option>
                            <option value="Preventive">Preventive</option>
                        </select>
                    </div>
                    <div>
                        <label for="rel-effectiveness" class="block text-sm font-medium text-gray-700 mb-1">Effectiveness</label>
                        <select id="rel-effectiveness" x-model="currentRelationship.effectiveness" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary">
                            <option value="High">High</option>
                            <option value="Medium">Medium</option>
                            <option value="Low">Low</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <label for="rel-notes" class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea id="rel-notes" x-model="currentRelationship.notes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary"></textarea>
                    </div>
                </div>
                <div class="flex justify-end space-x-3">
                    <button type="button" @click="closeModal()" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button>
                    <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-primary hover:bg-darkblue">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div x-show="showDeleteModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-sm w-full">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Confirm Delete</h3>
            <p class="text-gray-600 mb-6" x-text="`Are you sure you want to delete ${deleteItemName}?`"></p>
            <div class="flex justify-end space-x-3">
                <button @click="showDeleteModal = false" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button>
                <button @click="performDelete()" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700">Delete</button>
            </div>
        </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div id="logout-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-sm w-full">
            <h3 class="text-lg font-medium text-gray-900 mb-4">Confirm Logout</h3>
            <p class="text-gray-600 mb-6">Are you sure you want to log out of your account?</p>
            <div class="flex justify-end space-x-3">
                <button id="cancel-logout" class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">Cancel</button>
                <button id="confirm-logout" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700">Logout</button>
            </div>
        </div>
    </div>

    <script>
        // Logout functionality
        document.getElementById('logout-button').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('logout-modal').classList.remove('hidden');
        });

        document.getElementById('cancel-logout').addEventListener('click', function() {
            document.getElementById('logout-modal').classList.add('hidden');
        });

        document.getElementById('confirm-logout').addEventListener('click', function() {
            alert('You have been logged out successfully.');
            document.getElementById('logout-modal').classList.add('hidden');
        });

        // Medicine-Disease App
        function medicineDiseaseApp() {
            return {
                activeTab: 'medicines',
                searchQuery: '',
                showModal: false,
                showDeleteModal: false,
                modalTitle: '',
                deleteItemId: null,
                deleteItemName: '',
                deleteItemType: '',
                currentMedicine: {
                    id: '',
                    brandName: '',
                    genericName: '',
                    strength: '',
                    type: 'Prescription',
                    relatedDiseases: []
                },
                currentDisease: {
                    id: '',
                    name: '',
                    code: '',
                    category: '',
                    relatedMedicines: []
                },
                currentRelationship: {
                    id: '',
                    medicineId: '',
                    diseaseId: '',
                    type: 'Primary',
                    effectiveness: 'High',
                    notes: ''
                },
                medicines: [
                    {
                        id: '1',
                        brandName: 'Lipitor',
                        genericName: 'Atorvastatin',
                        strength: '20mg',
                        type: 'Prescription',
                        relatedDiseases: ['Hyperlipidemia', 'Atherosclerosis']
                    },
                    {
                        id: '2',
                        brandName: 'Glucophage',
                        genericName: 'Metformin',
                        strength: '500mg',
                        type: 'Prescription',
                        relatedDiseases: ['Diabetes Mellitus Type 2']
                    },
                    {
                        id: '3',
                        brandName: 'Zoloft',
                        genericName: 'Sertraline',
                        strength: '50mg',
                        type: 'Prescription',
                        relatedDiseases: ['Major Depressive Disorder', 'Anxiety']
                    },
                    {
                        id: '4',
                        brandName: 'Synthroid',
                        genericName: 'Levothyroxine',
                        strength: '50mcg',
                        type: 'Prescription',
                        relatedDiseases: ['Hypothyroidism']
                    },
                    {
                        id: '5',
                        brandName: 'Ventolin',
                        genericName: 'Albuterol',
                        strength: 'Inhaler',
                        type: 'Prescription',
                        relatedDiseases: ['Asthma', 'COPD']
                    }
                ],
                diseases: [
                    {
                        id: '1',
                        name: 'Hyperlipidemia',
                        code: 'E78.5',
                        category: 'Metabolic Disorder',
                        relatedMedicines: ['Lipitor', 'Crestor']
                    },
                    {
                        id: '2',
                        name: 'Diabetes Mellitus Type 2',
                        code: 'E11.9',
                        category: 'Endocrine',
                        relatedMedicines: ['Glucophage', 'Januvia']
                    },
                    {
                        id: '3',
                        name: 'Major Depressive Disorder',
                        code: 'F32.9',
                        category: 'Psychiatric',
                        relatedMedicines: ['Zoloft', 'Prozac']
                    },
                    {
                        id: '4',
                        name: 'Hypothyroidism',
                        code: 'E03.9',
                        category: 'Endocrine',
                        relatedMedicines: ['Synthroid']
                    },
                    {
                        id: '5',
                        name: 'Asthma',
                        code: 'J45.909',
                        category: 'Respiratory',
                        relatedMedicines: ['Ventolin', 'Advair']
                    }
                ],
                relationships: [
                    {
                        id: '1',
                        medicineId: '1',
                        medicineName: 'Lipitor',
                        medicineGeneric: 'Atorvastatin',
                        diseaseId: '1',
                        diseaseName: 'Hyperlipidemia',
                        diseaseCode: 'E78.5',
                        type: 'Primary',
                        effectiveness: 'High',
                        notes: 'First-line treatment for high cholesterol'
                    },
                    {
                        id: '2',
                        medicineId: '2',
                        medicineName: 'Glucophage',
                        medicineGeneric: 'Metformin',
                        diseaseId: '2',
                        diseaseName: 'Diabetes Mellitus Type 2',
                        diseaseCode: 'E11.9',
                        type: 'Primary',
                        effectiveness: 'High',
                        notes: 'First-line oral medication for type 2 diabetes'
                    },
                    {
                        id: '3',
                        medicineId: '3',
                        medicineName: 'Zoloft',
                        medicineGeneric: 'Sertraline',
                        diseaseId: '3',
                        diseaseName: 'Major Depressive Disorder',
                        diseaseCode: 'F32.9',
                        type: 'Primary',
                        effectiveness: 'Medium',
                        notes: 'SSRI antidepressant, takes 4-6 weeks for full effect'
                    },
                    {
                        id: '4',
                        medicineId: '4',
                        medicineName: 'Synthroid',
                        medicineGeneric: 'Levothyroxine',
                        diseaseId: '4',
                        diseaseName: 'Hypothyroidism',
                        diseaseCode: 'E03.9',
                        type: 'Primary',
                        effectiveness: 'High',
                        notes: 'Hormone replacement for underactive thyroid'
                    },
                    {
                        id: '5',
                        medicineId: '5',
                        medicineName: 'Ventolin',
                        medicineGeneric: 'Albuterol',
                        diseaseId: '5',
                        diseaseName: 'Asthma',
                        diseaseCode: 'J45.909',
                        type: 'Secondary',
                        effectiveness: 'High',
                        notes: 'Rescue inhaler for acute asthma symptoms'
                    }
                ],
                get filteredMedicines() {
                    return this.medicines.filter(medicine => 
                        medicine.brandName.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                        medicine.genericName.toLowerCase().includes(this.searchQuery.toLowerCase())
                    );
                },
                get filteredDiseases() {
                    return this.diseases.filter(disease => 
                        disease.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                        disease.code.toLowerCase().includes(this.searchQuery.toLowerCase())
                    );
                },
                get filteredRelationships() {
                    return this.relationships.filter(rel => 
                        rel.medicineName.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                        rel.diseaseName.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                        rel.medicineGeneric.toLowerCase().includes(this.searchQuery.toLowerCase())
                    );
                },
                openAddModal() {
                    if (this.activeTab === 'medicines') {
                        this.currentMedicine = {
                            id: '',
                            brandName: '',
                            genericName: '',
                            strength: '',
                            type: 'Prescription',
                            relatedDiseases: []
                        };
                        this.modalTitle = 'Add New Medicine';
                    } else if (this.activeTab === 'diseases') {
                        this.currentDisease = {
                            id: '',
                            name: '',
                            code: '',
                            category: '',
                            relatedMedicines: []
                        };
                        this.modalTitle = 'Add New Disease/Condition';
                    } else {
                        this.currentRelationship = {
                            id: '',
                            medicineId: '',
                            diseaseId: '',
                            type: 'Primary',
                            effectiveness: 'High',
                            notes: ''
                        };
                        this.modalTitle = 'Add New Relationship';
                    }
                    this.showModal = true;
                },
                openRelationshipModal() {
                    this.activeTab = 'relationships';
                    this.openAddModal();
                },
                editMedicine(medicine) {
                    this.currentMedicine = JSON.parse(JSON.stringify(medicine));
                    this.modalTitle = 'Edit Medicine';
                    this.showModal = true;
                },
                editDisease(disease) {
                    this.currentDisease = JSON.parse(JSON.stringify(disease));
                    this.modalTitle = 'Edit Disease/Condition';
                    this.showModal = true;
                },
                editRelationship(relationship) {
                    this.currentRelationship = JSON.parse(JSON.stringify(relationship));
                    this.modalTitle = 'Edit Relationship';
                    this.showModal = true;
                },
                closeModal() {
                    this.showModal = false;
                },
                saveMedicine() {
                    if (this.currentMedicine.id) {
                        // Update existing medicine
                        const index = this.medicines.findIndex(m => m.id === this.currentMedicine.id);
                        this.medicines[index] = this.currentMedicine;
                    } else {
                        // Add new medicine
                        this.currentMedicine.id = Date.now().toString();
                        this.medicines.push(this.currentMedicine);
                    }
                    this.showModal = false;
                    alert('Medicine saved successfully!');
                },
                saveDisease() {
                    if (this.currentDisease.id) {
                        // Update existing disease
                        const index = this.diseases.findIndex(d => d.id === this.currentDisease.id);
                        this.diseases[index] = this.currentDisease;
                    } else {
                        // Add new disease
                        this.currentDisease.id = Date.now().toString();
                        this.diseases.push(this.currentDisease);
                    }
                    this.showModal = false;
                    alert('Disease/Condition saved successfully!');
                },
                saveRelationship() {
                    if (!this.currentRelationship.medicineId || !this.currentRelationship.diseaseId) {
                        alert('Please select both medicine and disease/condition');
                        return;
                    }
                    
                    const medicine = this.medicines.find(m => m.id === this.currentRelationship.medicineId);
                    const disease = this.diseases.find(d => d.id === this.currentRelationship.diseaseId);
                    
                    if (this.currentRelationship.id) {
                        // Update existing relationship
                        const index = this.relationships.findIndex(r => r.id === this.currentRelationship.id);
                        this.relationships[index] = {
                            ...this.currentRelationship,
                            medicineName: medicine.brandName,
                            medicineGeneric: medicine.genericName,
                            diseaseName: disease.name,
                            diseaseCode: disease.code
                        };
                    } else {
                        // Add new relationship
                        this.currentRelationship.id = Date.now().toString();
                        this.relationships.push({
                            ...this.currentRelationship,
                            medicineName: medicine.brandName,
                            medicineGeneric: medicine.genericName,
                            diseaseName: disease.name,
                            diseaseCode: disease.code
                        });
                    }
                    this.showModal = false;
                    alert('Relationship saved successfully!');
                },
                confirmDelete(id, name, type) {
                    this.deleteItemId = id;
                    this.deleteItemName = name;
                    this.deleteItemType = type;
                    this.showDeleteModal = true;
                },
                performDelete() {
                    if (this.deleteItemType === 'medicine') {
                        this.medicines = this.medicines.filter(m => m.id !== this.deleteItemId);
                        // Also remove from relationships
                        this.relationships = this.relationships.filter(r => r.medicineId !== this.deleteItemId);
                    } else if (this.deleteItemType === 'disease') {
                        this.diseases = this.diseases.filter(d => d.id !== this.deleteItemId);
                        // Also remove from relationships
                        this.relationships = this.relationships.filter(r => r.diseaseId !== this.deleteItemId);
                    } else {
                        this.relationships = this.relationships.filter(r => r.id !== this.deleteItemId);
                    }
                    this.showDeleteModal = false;
                    alert('Item deleted successfully!');
                }
            }
        }
    </script>
</body>
</html>